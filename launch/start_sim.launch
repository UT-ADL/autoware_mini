<?xml version="1.0"?>
<launch>

    <arg name="waypoints_file"          default="wp_erm_two_turns.csv" />

    <arg name="follower"                default="pure_pursuit"  doc="pure_pursuit, stanley" />
    <arg name="planning_time"           default="2.0"           doc="pure_pursuit - lookahead distance depends on that" />
    <arg name="min_lookahead_distance"  default="6.0"           doc="pure_pursuit - min lookahead distance" />
    <arg name="cte_gain"                default="1.0"           doc="stanley - gain for cross_track_error (cte), higher value prioritizes cte" />

    <group ns="autoware_mini">

        <!-- Waypoint_loader -->
        <node pkg="autoware_mini" type="waypoint_loader.py" name="waypoint_loader" output="screen" required="true">
            <param name="waypoints_file"  value="$(find autoware_mini)/data/$(arg waypoints_file)" />
        </node>

        <!-- Follower -->
        <include file="$(find autoware_mini)/launch/control.launch">
            <arg name="follower"               value="$(arg follower)" />
            <arg name="planning_time"          value="$(arg planning_time)" />
            <arg name="min_lookahead_distance" value="$(arg min_lookahead_distance)" />
            <arg name="cte_gain"               value="$(arg cte_gain)" />
        </include>

        <!-- Bicycle_model simulator -->
        <node pkg="autoware_mini" type="bicycle_simulation.py" name="bicycle_simulation" output="screen" required="true"/>

        <!-- Rviz -->
        <node type="rviz" name="rviz" pkg="rviz" args="-d $(find autoware_mini)/rviz/autoware_mini_sim.rviz" required="true"/>
    </group>

</launch>