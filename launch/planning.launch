<?xml version="1.0"?>
<launch>

    <arg name="planner"                 default="waypoints"     doc="waypoints, lanelet2" />
    <arg name="waypoints_file"          default="waypoints_erm_utm_1m.csv" />
    <arg name="lanelet2_map"            default="tartu_demo_l_c_wp.osm" />
    

    <group ns="planning">

        <!-- Remap topics -->
        <remap from="current_pose"     to="/localization/current_pose" />
        <remap from="current_velocity" to="/localization/current_velocity" />

        <!-- Waypoint_loader -->
        <node if="$(eval arg('planner')=='waypoints')"  pkg="autoware_mini" type="waypoint_loader.py" name="waypoint_loader" output="screen" required="true">
            <param name="waypoints_file" value="$(find autoware_mini)/data/$(arg waypoints_file)" />
        </node>

        <!-- Lanelet2 map loader -->
        <node pkg="autoware_mini" type="lanelet2_map_loader.py" name="lanelet2_map_loader" output="screen" required="true">
            <param name="lanelet2_map" value="$(find autoware_mini)/data/lanelet2/$(arg lanelet2_map)" />
        </node>

        <!-- Lanelet2 global planner -->
        <node if="$(eval arg('planner')=='lanelet2')" pkg="autoware_mini" type="lanelet2_global_planner.py" name="lanelet2_global_planner" output="screen" required="true">
            <param name="lanelet2_map" value="$(find autoware_mini)/data/lanelet2/$(arg lanelet2_map)" />
        </node>

        <!-- Waypoint_visualizer - necessary also for visualizing path from global planner-->
        <node pkg="autoware_mini" type="waypoint_visualizer.py" name="waypoint_visualizer" output="screen" required="true"/>

    </group>

</launch>