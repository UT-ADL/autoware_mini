# Local plannning


## velocity_local_planner

The `velocity_local_planner` node is responsible for generating a local path that can be followed by the vehicle, using the smoothed_path as a reference. The local path is generated based on the current position of the vehicle and the surrounding environment, such as detected objects, traffic lights, and stop lines. `velocity_local_planner` changes only the speeds of the smoothed_path depending on the detected objects and traffic lights.


#### Parameters

| Name | Type | Default | Description |
|------|------|---------|-------------|
|`~local_path_length` | double | `100` | The maximum length of the local path in meters (m) |
|`~nearest_neighbor_search` | string | `"kd_tree"` | The algorithm used for nearest neighbor search, alternative options: kd_tree, ball_tree, brute, auto|
|`braking_safety_distance` | double | `2.0` | The minimum distance from an object where the vehicle should stop (m) |
|`braking_reaction_time` | double | `1.6` | The time it takes the vehicle to react to an object in front of it  (s) |
|`car_safety_radius` | double | `1.3` | The safety radius of the vehicle - obstacles are detected within these circles around waypoints (m) |
|`current_pose_to_car_front` | double | `4.0` | The distance from the current pose of the vehicle to the front of the car (m) |
|`default_deceleration` | double | `1.0` | The maximum rate at which the vehicle can decelerate (m/s2) |


#### Subscribed Topics

| Name | Type | Description |
|------|------|-------------|
|`smoothed_path` | `autoware_msgs/Lane` | The smoothed global path |
|`/localization/current_pose` | `geometry_msgs/PoseStamped` | The current pose of the vehicle |
|`/localization/current_velocity` | `geometry_msgs/TwistStamped` | The current velocity of the vehicle |
|`/detection/detected_objects` | `autoware_msgs/DetectedObjectArray` | Detected objects |
|`/detection/traffic_light_status` | `autoware_msgs/TrafficLightResultArray` | Traffic light status |


#### Published Topics

| Name | Type | Description |
|------|------|-------------|
|`/local_path` | `autoware_msgs/Lane` | The local path generated by the node |
